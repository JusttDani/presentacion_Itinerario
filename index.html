import React, { useState, useEffect } from 'react';
import { ChevronRight, ChevronLeft, Mic, X, Maximize, Monitor, Users, TrendingUp, Shield, DollarSign, Target, Globe, Rocket, AlertCircle, CheckCircle } from 'lucide-react';

// Im√°genes de stock para enriquecer la presentaci√≥n (Unsplash)
const images = {
  shop: "https://images.unsplash.com/photo-1556740758-90de374c12ad?auto=format&fit=crop&w=1600&q=80", // Tienda/Pago
  chaos: "https://images.unsplash.com/photo-1450101499163-c8848c66ca85?auto=format&fit=crop&w=800&q=80", // Papeles/Caos
  solution: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=800&q=80", // Dashboard/Tablet
  team: "https://images.unsplash.com/photo-1522071820081-009f0129c71c?auto=format&fit=crop&w=1600&q=80", // Equipo
  handshake: "https://images.unsplash.com/photo-1521791136064-7986c2920216?auto=format&fit=crop&w=1600&q=80", // Trato/CTA
  market: "https://images.unsplash.com/photo-1556761175-5973dc0f32e7?auto=format&fit=crop&w=800&q=80", // Mercado/Gente
  coding: "https://images.unsplash.com/photo-1571171637578-41bc2dd41cd2?auto=format&fit=crop&w=800&q=80", // C√≥digo
  growth: "https://images.unsplash.com/photo-1543286386-713df548e9cc?auto=format&fit=crop&w=800&q=80" // Crecimiento
};

const slidesData = [
  {
    id: 1,
    type: "cover",
    title: "Zateme",
    subtitle: "Digitalizaci√≥n sin Fricci√≥n para la PYME",
    tagline: "Gesti√≥n integral de citas, encargos y ventas.",
    footer: "Dani Tejedor (CEO) | Samuel Medina (CMO) | Jeandeivid Zapata (Dir. Desarrollo)",
    bgImage: images.shop,
    notes: "Buenos d√≠as. Soy Dani Tejedor, CEO de Zateme. Vivimos en un mundo donde lo digital es la norma, pero el comercio local se est√° quedando atr√°s. Zateme es la herramienta que garantiza su supervivencia.",
    icon: Monitor
  },
  {
    id: 2,
    type: "split",
    title: "Resumen Ejecutivo",
    subtitle: "La Soluci√≥n Definitiva",
    content: [
      { bold: "Misi√≥n:", text: "Empoderar al comercio local frente a las franquicias." },
      { bold: "Soluci√≥n:", text: "SaaS 'Todo en Uno' (Citas + Encargos + Ventas) para no t√©cnicos." },
      { bold: "Estado Actual:", text: "Empresa S.L., capital 15.000‚Ç¨, MVP en desarrollo." },
      { bold: "Ventaja:", text: "Simplicidad radical y adaptaci√≥n total." }
    ],
    sideImage: images.team,
    notes: "Zateme unifica citas y ventas en una plataforma nube tan sencilla que no requiere formaci√≥n. Ya estamos constituidos y listos para atacar un mercado desatendido.",
    icon: Target
  },
  {
    id: 3,
    type: "problem",
    title: "El Problema",
    subtitle: "La Brecha Digital Mortal",
    content: [
      { bold: "Desaparici√≥n Local:", text: "P√©rdida de cuota diaria frente a gigantes digitales." },
      { bold: "Complejidad:", text: "Los ERPs actuales son para ingenieros, no para comerciantes." },
      { bold: "Ineficiencia:", text: "Gesti√≥n manual = Mermas y p√©rdida de tiempo." },
      { bold: "Miedo:", text: "Resistencia a tecnolog√≠as que cambian su forma de trabajar." }
    ],
    sideImage: images.chaos,
    notes: "El problema no es que no quieran digitalizarse, es que no pueden. Las herramientas actuales son complejas y caras. Esto provoca ineficiencia y cierre de negocios.",
    icon: AlertCircle
  },
  {
    id: 4,
    type: "solution",
    title: "La Soluci√≥n",
    subtitle: "Tu Negocio en 15 Minutos",
    content: [
      { bold: "Ecosistema Unificado:", text: "Citas + Encargos + Ventas (3 en 1)." },
      { bold: "UX Cero-Fricci√≥n:", text: "Dise√±o para usuarios sin experiencia." },
      { bold: "Adaptabilidad:", text: "El software se adapta al comercio, no al rev√©s." },
      { bold: "Tecnolog√≠a Web:", text: "Accesible desde cualquier m√≥vil o tablet." }
    ],
    sideImage: images.solution,
    notes: "Zateme es un gestor de tranquilidad. 'Digital√≠zate sin cambiar qui√©n eres'. Ofrecemos la potencia de un ERP con la sencillez de una red social.",
    icon: CheckCircle
  },
  {
    id: 5,
    type: "split",
    title: "Mercado y Oportunidad",
    subtitle: "Un Oc√©ano de PYMES",
    content: [
      { bold: "Viento de Cola:", text: "Fondos Next Gen (Kit Digital) impulsan la demanda." },
      { bold: "Target:", text: "Microempresas servicios/comercio en C. Valenciana." },
      { bold: "Entorno:", text: "Pol√≠tico favorable y costes operativos bajos en Valencia." },
      { bold: "Necesidad:", text: "Alta sensibilidad al precio y urgencia de ahorro de tiempo." }
    ],
    sideImage: images.market,
    notes: "El momento es ahora. Espa√±a inyecta millones en digitalizaci√≥n. Empezamos en Valencia para validar el modelo antes de escalar.",
    icon: Globe
  },
  {
    id: 6,
    type: "tech",
    title: "Producto / Tecnolog√≠a",
    subtitle: "Robusted Invisible",
    content: [
      { bold: "Stack:", text: "PHP, JS, Apache. Estable y bajo coste." },
      { bold: "Funcionalidades:", text: "Gestor Inteligente, Control de Stock, M√≥dulos." },
      { bold: "Seguridad:", text: "Listo para Facturaci√≥n Electr√≥nica y RGPD." }
    ],
    sideImage: images.coding,
    notes: "Tecnolog√≠a robusta bajo el cap√≥. Sistema modular que permite personalizaci√≥n masiva con bajo mantenimiento.",
    icon: Shield
  },
  {
    id: 7,
    type: "cards",
    title: "Modelo de Negocio",
    subtitle: "SaaS Escalable",
    content: [
      { title: "Suscripci√≥n", text: "Modelo recurrente mensual/anual B2B.", icon: "üí∞" },
      { title: "Precios", text: "Entrada baja para volumen y eliminaci√≥n de barreras.", icon: "üè∑Ô∏è" },
      { title: "Upselling", text: "Capas de personalizaci√≥n y soporte premium.", icon: "üìà" },
      { title: "Eficiencia", text: "Estructura ligera maximizando margen.", icon: "‚öôÔ∏è" }
    ],
    notes: "Modelo simple: SaaS. Precios agresivos para romper barreras, sostenido por una estructura de costes muy eficiente.",
    icon: DollarSign
  },
  {
    id: 8,
    type: "split",
    title: "Marketing y Ventas",
    subtitle: "\"Digital√≠zate en 15 Minutos\"",
    content: [
      { bold: "Mensaje:", text: "Simplicidad radical. Ahorro de tiempo real." },
      { bold: "Canales:", text: "SEO local, RRSS y Beta-Testers (Boca a boca)." },
      { bold: "Retenci√≥n:", text: "Onboarding asistido gratuito. No te dejamos solo." }
    ],
    sideImage: images.growth,
    notes: "Vendemos tiempo. Atacamos el miedo a la complejidad con un onboarding asistido y prueba social local.",
    icon: TrendingUp
  },
  {
    id: 9,
    type: "timeline",
    title: "Tracci√≥n y Roadmap",
    subtitle: "Ejecuci√≥n Real",
    content: [
      { year: "Pasado", title: "Constituci√≥n", text: "Zateme S.L. + 15k‚Ç¨ Capital Propio." },
      { year: "Presente", title: "Desarrollo", text: "Definici√≥n funcional y Arquitectura." },
      { year: "Q2", title: "Lanzamiento", text: "MVP y Beta Privada (10 comercios)." },
      { year: "Q3-Q4", title: "Expansi√≥n", text: "Lanzamiento comercial Valencia." }
    ],
    notes: "Somos una realidad legal y financiera. Foco inmediato: Validar MVP con 10 comercios piloto.",
    icon: Rocket
  },
  {
    id: 10,
    type: "comparison",
    title: "Competencia",
    subtitle: "Nuestro Espacio",
    content: [
      { name: "ERPs Gigantes", desc: "Caros, Complejos, Lejanos", type: "bad" },
      { name: "Excel / Papel", desc: "Ineficiente, Manual, Error", type: "bad" },
      { name: "Zateme", desc: "Simple, Potente, Cercano", type: "good" }
    ],
    notes: "Ocupamos el hueco entre el Excel gratis pero in√∫til y el ERP caro e incomprensible. Ganamos por cercan√≠a.",
    icon: Target
  },
  {
    id: 11,
    type: "finance",
    title: "Proyecciones",
    subtitle: "Uso de Fondos (15k‚Ç¨)",
    content: [
      { label: "Producto (MVP)", value: 40, color: "bg-blue-600" },
      { label: "Marketing", value: 30, color: "bg-orange-500" },
      { label: "Legal/Admin", value: 20, color: "bg-gray-500" },
      { label: "Maniobra", value: 10, color: "bg-gray-300" }
    ],
    extraText: "Objetivo: Break-even en mes 18.",
    notes: "Mentalidad Lean. Inversi√≥n centrada en producto y validaci√≥n de mercado.",
    icon: DollarSign
  },
  {
    id: 12,
    type: "team",
    title: "El Equipo Fundador",
    subtitle: "ADN Complementario",
    content: [
      { name: "Dani Tejedor", role: "CEO | Visi√≥n", desc: "Estrategia y Finanzas. Perfil Atrevido." },
      { name: "Samuel Medina", role: "CMO | Cliente", desc: "Marketing y Ventas. Perfil Creativo." },
      { name: "Jeandeivid Zapata", role: "CTO | Tech", desc: "Arquitectura y C√≥digo. Perfil Ejecutor." }
    ],
    notes: "Tres perfiles complementarios con compromiso total (Socios a partes iguales).",
    icon: Users
  },
  {
    id: 13,
    type: "cover",
    title: "√önete al Cambio",
    subtitle: "¬øHablamos?",
    tagline: "Buscamos Partners y Comercios Piloto.",
    footer: "www.zateme.com | contacto@zateme.com",
    bgImage: images.handshake,
    notes: "Zateme es una causa necesaria con potencial econ√≥mico enorme. Hablemos.",
    icon: Monitor
  }
];

// Componentes de Renderizado de Slides
const CoverSlide = ({ slide }) => (
  <div className="flex flex-col items-center justify-center h-full text-center text-white relative z-10 px-12">
    <div className="absolute inset-0 bg-black bg-opacity-60 z-0"></div>
    <div className="z-10 animate-in fade-in zoom-in duration-700">
        <div className="mb-6 flex justify-center">
             <div className="p-4 bg-orange-500 rounded-full shadow-lg shadow-orange-500/50">
                 <slide.icon size={48} className="text-white" />
             </div>
        </div>
        <h1 className="text-6xl md:text-8xl font-black mb-4 tracking-tight leading-tight">
        {slide.title}
        </h1>
        <h2 className="text-3xl md:text-4xl font-light mb-8 text-orange-400">{slide.subtitle}</h2>
        <div className="w-32 h-2 bg-orange-500 mx-auto mb-8 rounded-full"></div>
        <p className="text-xl md:text-2xl opacity-90 font-medium">{slide.tagline}</p>
    </div>
    <div className="absolute bottom-12 z-10 text-sm opacity-70 font-mono tracking-widest uppercase">
        {slide.footer}
    </div>
  </div>
);

const SplitSlide = ({ slide }) => (
  <div className="flex h-full">
    <div className="w-1/2 p-12 flex flex-col justify-center bg-white z-10">
      <div className="flex items-center gap-3 mb-4 text-orange-600">
         <slide.icon size={28} />
         <span className="text-sm font-bold uppercase tracking-widest">{slide.title}</span>
      </div>
      <h2 className="text-4xl font-extrabold text-gray-900 mb-8 leading-tight">{slide.subtitle}</h2>
      <ul className="space-y-6">
        {slide.content.map((item, idx) => (
          <li key={idx} className="flex items-start gap-4">
            <div className="min-w-6 h-6 mt-1 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-xs">
                {idx + 1}
            </div>
            <div>
                <span className="block text-gray-900 font-bold text-lg mb-1">{item.bold}</span>
                <span className="text-gray-600 leading-relaxed">{item.text}</span>
            </div>
          </li>
        ))}
      </ul>
    </div>
    <div className="w-1/2 relative overflow-hidden">
        <div className="absolute inset-0 bg-gradient-to-l from-transparent to-white/10 z-10"></div>
        <img src={slide.sideImage} alt="Slide Visual" className="w-full h-full object-cover" />
    </div>
  </div>
);

const CardsSlide = ({ slide }) => (
  <div className="p-12 h-full flex flex-col justify-center bg-gray-50">
     <div className="text-center mb-10">
        <h2 className="text-4xl font-extrabold text-gray-900">{slide.title}</h2>
        <p className="text-xl text-orange-600 mt-2">{slide.subtitle}</p>
     </div>
     <div className="grid grid-cols-2 gap-6">
        {slide.content.map((card, idx) => (
            <div key={idx} className="bg-white p-6 rounded-xl shadow-lg border-l-4 border-orange-500 hover:shadow-xl transition-shadow">
                <div className="text-4xl mb-4">{card.icon}</div>
                <h3 className="text-xl font-bold text-gray-900 mb-2">{card.title}</h3>
                <p className="text-gray-600">{card.text}</p>
            </div>
        ))}
     </div>
  </div>
);

const TimelineSlide = ({ slide }) => (
    <div className="p-12 h-full flex flex-col justify-center bg-white">
        <div className="mb-12">
            <h2 className="text-4xl font-extrabold text-gray-900">{slide.title}</h2>
            <p className="text-xl text-orange-600">{slide.subtitle}</p>
        </div>
        <div className="relative">
            {/* Line */}
            <div className="absolute top-1/2 left-0 w-full h-1 bg-gray-200 transform -translate-y-1/2 z-0"></div>
            
            <div className="grid grid-cols-4 gap-4 relative z-10">
                {slide.content.map((item, idx) => (
                    <div key={idx} className="flex flex-col items-center text-center group">
                        <div className="w-8 h-8 rounded-full bg-orange-500 border-4 border-white shadow-md mb-4 group-hover:scale-125 transition-transform"></div>
                        <div className="bg-blue-50 p-4 rounded-lg shadow-sm border border-blue-100 w-full h-32 flex flex-col justify-center">
                            <span className="text-xs font-bold text-orange-600 uppercase tracking-wider mb-1">{item.year}</span>
                            <h4 className="font-bold text-gray-900">{item.title}</h4>
                            <p className="text-sm text-gray-600 mt-2">{item.text}</p>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </div>
);

const FinanceSlide = ({ slide }) => (
    <div className="p-12 h-full flex flex-col justify-center bg-white">
        <div className="mb-10 text-center">
             <h2 className="text-4xl font-extrabold text-gray-900">{slide.title}</h2>
             <p className="text-xl text-gray-500">{slide.subtitle}</p>
        </div>
        <div className="max-w-2xl mx-auto w-full space-y-6">
            {slide.content.map((item, idx) => (
                <div key={idx}>
                    <div className="flex justify-between mb-1">
                        <span className="text-base font-medium text-gray-700">{item.label}</span>
                        <span className="text-sm font-medium text-gray-700">{item.value}%</span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-6 overflow-hidden shadow-inner">
                        <div 
                            className={`${item.color} h-6 rounded-full flex items-center justify-end pr-2 text-white text-xs font-bold animate-in slide-in-from-left duration-1000`} 
                            style={{ width: `${item.value}%` }}
                        >
                        </div>
                    </div>
                </div>
            ))}
            <div className="mt-8 p-4 bg-green-50 border border-green-200 rounded-lg text-center text-green-800 font-bold">
                {slide.extraText}
            </div>
        </div>
    </div>
);

const ComparisonSlide = ({ slide }) => (
    <div className="p-12 h-full flex flex-col justify-center bg-gray-50">
        <div className="text-center mb-12">
            <h2 className="text-4xl font-extrabold text-gray-900">{slide.title}</h2>
        </div>
        <div className="grid grid-cols-3 gap-6 items-end">
            {slide.content.map((item, idx) => (
                <div key={idx} className={`p-8 rounded-2xl text-center shadow-xl transform transition-transform hover:-translate-y-2 ${item.type === 'good' ? 'bg-blue-900 text-white scale-110 z-10 border-4 border-orange-500' : 'bg-white text-gray-500 opacity-80'}`}>
                    {item.type === 'good' && <div className="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full">NOSOTROS</div>}
                    <h3 className={`text-2xl font-bold mb-4 ${item.type === 'good' ? 'text-white' : 'text-gray-900'}`}>{item.name}</h3>
                    <p className="leading-relaxed font-medium">{item.desc}</p>
                </div>
            ))}
        </div>
    </div>
);

const TeamSlide = ({ slide }) => (
    <div className="p-12 h-full flex flex-col justify-center bg-white">
        <div className="text-center mb-12">
             <h2 className="text-4xl font-extrabold text-gray-900">{slide.title}</h2>
             <p className="text-xl text-orange-600">{slide.subtitle}</p>
        </div>
        <div className="grid grid-cols-3 gap-8">
            {slide.content.map((member, idx) => (
                <div key={idx} className="flex flex-col items-center text-center p-6 bg-gray-50 rounded-xl shadow-sm hover:shadow-md transition">
                    <div className="w-24 h-24 rounded-full bg-gray-300 mb-4 overflow-hidden border-4 border-white shadow-lg">
                        <img src={`https://api.dicebear.com/7.x/avataaars/svg?seed=${member.name}`} alt={member.name} className="w-full h-full" />
                    </div>
                    <h3 className="text-xl font-bold text-gray-900">{member.name}</h3>
                    <span className="text-xs font-bold text-blue-600 uppercase tracking-widest my-2">{member.role}</span>
                    <p className="text-sm text-gray-600 italic">"{member.desc}"</p>
                </div>
            ))}
        </div>
    </div>
);


export default function ZatemePitchDeck() {
  const [currentSlide, setCurrentSlide] = useState(0);
  const [showNotes, setShowNotes] = useState(false);

  const nextSlide = () => {
    if (currentSlide < slidesData.length - 1) {
      setCurrentSlide(curr => curr + 1);
    }
  };

  const prevSlide = () => {
    if (currentSlide > 0) {
      setCurrentSlide(curr => curr - 1);
    }
  };

  useEffect(() => {
    const handleKeyDown = (e) => {
      if (e.key === 'ArrowRight' || e.key === 'Space') nextSlide();
      if (e.key === 'ArrowLeft') prevSlide();
    };
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [currentSlide]);

  const slide = slidesData[currentSlide];

  const renderSlideContent = () => {
    switch(slide.type) {
        case 'cover': return <CoverSlide slide={slide} />;
        case 'split': return <SplitSlide slide={slide} />;
        case 'problem': return <SplitSlide slide={slide} />; // Usamos Split con foto de caos
        case 'solution': return <SplitSlide slide={slide} />; // Usamos Split con foto de soluci√≥n
        case 'tech': return <SplitSlide slide={slide} />;
        case 'cards': return <CardsSlide slide={slide} />;
        case 'timeline': return <TimelineSlide slide={slide} />;
        case 'comparison': return <ComparisonSlide slide={slide} />;
        case 'finance': return <FinanceSlide slide={slide} />;
        case 'team': return <TeamSlide slide={slide} />;
        default: return <SplitSlide slide={slide} />;
    }
  };

  return (
    <div className="flex flex-col items-center justify-center min-h-screen bg-gray-900 font-sans p-4">
      
      {/* Main Slide Container */}
      <div className="relative w-full max-w-6xl aspect-video bg-white shadow-2xl rounded-xl overflow-hidden flex flex-col">
        
        {/* Background Image for Cover Slides */}
        {slide.bgImage && (
            <div className="absolute inset-0 z-0">
                <img src={slide.bgImage} alt="Background" className="w-full h-full object-cover" />
            </div>
        )}

        {/* Slide Content */}
        <div className="flex-1 relative z-10 h-full">
            {renderSlideContent()}
        </div>

        {/* Controls Overlay */}
        <div className="absolute bottom-0 left-0 w-full p-6 flex justify-between items-end z-50 pointer-events-none">
           <div className="pointer-events-auto bg-black/50 backdrop-blur-sm text-white px-4 py-2 rounded-full flex items-center gap-4 shadow-lg hover:bg-black/70 transition">
             <button 
               onClick={prevSlide} 
               disabled={currentSlide === 0}
               className={`hover:text-orange-400 transition ${currentSlide === 0 ? 'opacity-30' : ''}`}
             >
               <ChevronLeft size={24} />
             </button>
             <span className="font-mono text-sm font-bold">{currentSlide + 1} / {slidesData.length}</span>
             <button 
               onClick={nextSlide} 
               disabled={currentSlide === slidesData.length - 1}
               className={`hover:text-orange-400 transition ${currentSlide === slidesData.length - 1 ? 'opacity-30' : ''}`}
             >
               <ChevronRight size={24} />
             </button>
           </div>

           <div className="pointer-events-auto">
             <button 
               onClick={() => setShowNotes(!showNotes)}
               className={`p-3 rounded-full shadow-lg transition ${showNotes ? 'bg-orange-500 text-white' : 'bg-white text-gray-800 hover:bg-gray-100'}`}
             >
               <Mic size={20} />
             </button>
           </div>
        </div>

        {/* Speaker Notes Panel */}
        {showNotes && (
          <div className="absolute top-6 right-6 w-80 bg-yellow-50 text-gray-800 p-6 rounded-xl shadow-2xl border-l-4 border-yellow-400 z-50 animate-in fade-in slide-in-from-right-10 duration-300">
            <div className="flex justify-between items-center mb-3">
              <h3 className="font-bold text-xs uppercase tracking-wider text-yellow-700">Notas del Presentador</h3>
              <button onClick={() => setShowNotes(false)} className="text-gray-400 hover:text-gray-600">
                <X size={16} />
              </button>
            </div>
            <p className="text-base leading-relaxed font-medium">
              "{slide.notes}"
            </p>
          </div>
        )}

      </div>
      
      <div className="mt-6 text-gray-500 text-sm font-medium flex items-center gap-2">
         <span className="px-2 py-1 bg-gray-800 rounded text-gray-300 text-xs">‚Üê/‚Üí</span> Navegar
         <span className="px-2 py-1 bg-gray-800 rounded text-gray-300 text-xs ml-4">ESPACIO</span> Siguiente
      </div>
    </div>
  );
}
